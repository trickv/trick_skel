# functions for setting env vars for mintel proxy

trick_skel_proxy () {
    # if it looks like we're in chicago...
    hostname | egrep "(atlas|usdmm.com)" &> /dev/null
    if [ $? -eq 0 ]; then
        trick_skel_mintel_proxy us
    fi

    # if this is on mintel.co.uk, it's london or vital
    hostname | egrep "mintel.co.uk" &> /dev/null
    if [ $? -eq 0 ]; then
        # if it's vital, don't set proxy
        host `hostname` | grep '172.31' &> /dev/null
        if [ $? -ne 0 ]; then
            trick_skel_mintel_proxy uk
        fi
    fi
}

trick_skel_mintel_proxy () {
    # $1 should be either 'us' or 'uk'
    case "$1" in
        us)
            export HTTP_PROXY=http://atlas.usdmm.com:3128
        ;;
        uk)
            export HTTP_PROXY=http://proxy.mintel.co.uk:3128
        ;;
    esac
    
    export http_proxy=$HTTP_PROXY
    export HTTPS_PROXY=$HTTP_PROXY
    export https_proxy=$HTTP_PROXY
    export FTP_PROXY=$HTTP_PROXY
    export ftp_proxy=$HTTP_PROXY
    export no_proxy="mintel.co.uk,usdmm.com"
}

# vim:filetype=sh
