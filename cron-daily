#!/usr/bin/env bash

export PATH=$PATH:/usr/local/bin

cd $HOME/src/trick_skel
if [ $? -ne 0 ]; then
    echo "can't cd to trick_skel, bailing out"
    exit
fi

if [ -d .git ]; then
    git remote -v | grep ^readonly &> /dev/null
    if [ $? -ne 0 ]; then
        echo "No readonly remote, fix this?"
        exit 1
    fi
    git pull readonly > /dev/null
else
    svn up > /dev/null
    SVN_STAT=`svn stat`
    if [ "$SVN_STAT" != "" ]; then
        echo "Local modifications exist:"
        echo $SVN_STAT
        echo
    fi
fi

./install > /dev/null
