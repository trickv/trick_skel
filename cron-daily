#!/usr/bin/env bash

export PATH=$PATH:/usr/local/bin

cd $HOME/src/trick_skel
if [ $? -ne 0 ]; then
    echo "can't cd to trick_skel, bailing out"
    exit
fi

TRICK_HOSTNAME=${HOSTNAME%%.*}

case $TRICK_HOSTNAME in
    skywalker|dev-survey-app07|troy|futurebase-img01|atlas)
        echo "fixme: host is using old update method"
        # 2014-03-14
        ;;
    *)
        svn up > /dev/null
        SVN_STAT=`svn stat`
        if [ "$SVN_STAT" != "" ]; then
            echo "Local modifications exist:"
            echo $SVN_STAT
            echo
        fi
        ;;
esac

./install > /dev/null
